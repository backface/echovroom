<html>
<head>
  <title>LIVE!</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link href="https://unpkg.com/video.js/dist/video-js.css" rel="stylesheet" />
  <style type="text/css">
  html, body {background:black; color: white; margin:0}
  .vjs-default-skin .vjs-big-play-button {left: 50%;top: 50%;transform: translate(-50%,-50%)}
  .video-js { width:100%; height:100%; max-height:100% }
  iframe { 
  
  }
  .resizer { 
    box-sizing: border-box;
    display:flex; 
    margin:0; padding:0; 
    resize:both; 
    overflow:hidden; 
    position: absolute; 
    bottom: 0px;
    left: 50%; 
    transform: translate(-50%, 0); 
    height: 30%;
    width: 66%;
    padding: 0; 
    opacity: 0.7;  
   }
  .resizer > .resized { flex-grow:1; margin:0; padding:0; border:0 }
  .ugly { background:red; border:4px dashed black; }
  </style>
</head>

<body>
  <video class="video-js vjs-default-skin" controls="" height="360" id="my-video" poster="" width="640" muted autoplay>&nbsp;</video>

  <div class="resizer ugly">
    <iframe class="resized" src="http://localhost:8080/#/text/wienmodern" allowtransparency="true"></iframe>
  </div>


  <script src="https://unpkg.com/video.js/dist/video.js"></script>

  <!--
  <script src="https://cdn.jsdelivr.net/npm/videojs-contrib-hls.js@latest"></script>
  -->
  <script src="https://cdn.streamroot.io/videojs-hlsjs-plugin/1/stable/videojs-hlsjs-plugin.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/videojs-contrib-quality-levels@latest/dist/videojs-contrib-quality-levels.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/videojs-http-source-selector@latest/dist/videojs-http-source-selector.js"></script>

  <script>
    var options = {
      plugins: {
        reloadSourceOnError: {}
      }
    };

    var player = videojs('my-video', options);
    player.src([
      {type: "application/x-mpegURL", src: "https://kontakta.modular-t.org:8443/live/hello5.m3u8"},
    ]);
    player.httpSourceSelector();
    player.on('error', function(e) {
      if (e.target.player.error_.code == 2)
        document.getElementsByClassName("vjs-modal-dialog-content")[0].innerHTML = "Could not load media source! It might be offline?";
        //player.src([      {type: "application/x-mpegURL", src: window.location.protocol + "//" +  window.location.hostname + "/hls/live.m3u8"},]);    
    })
    
    function change(toggle) {
      let obj = document.querySelector(".resizer")
      if (toggle) {
        obj.style.height = "100%";
         obj.style.width = "100%";
         obj.style.opacity = "0.7";
      }  else {
        obj.style.height = "30%";
        obj.style.width = "66%";
        obj.style.opacity = "1";
      }
      setTimeout( () => { change(!toggle)}, 3000)
    }
    setTimeout( () => { change(true)}, 3000)

  </script>
  

</body>
</html>
